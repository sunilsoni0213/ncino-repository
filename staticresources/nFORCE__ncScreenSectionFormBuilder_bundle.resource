!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=39)}([function(module,exports){module.exports=function(useSourceMap){var list=[];return list.toString=function toString(){return this.map(function(item){var content=function cssWithMappingToString(item,useSourceMap){var content=item[1]||"",cssMapping=item[3];if(!cssMapping)return content;if(useSourceMap&&"function"==typeof btoa){var sourceMapping=function toComment(sourceMap){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"}(cssMapping),sourceURLs=cssMapping.sources.map(function(source){return"/*# sourceURL="+cssMapping.sourceRoot+source+" */"});return[content].concat(sourceURLs).concat([sourceMapping]).join("\n")}return[content].join("\n")}(item,useSourceMap);return item[2]?"@media "+item[2]+"{"+content+"}":content}).join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,exports,__webpack_require__){var fn,memo,stylesInDom={},isOldIE=(fn=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===memo&&(memo=fn.apply(this,arguments)),memo}),getElement=function(fn){var memo={};return function(target,parent){if("function"==typeof target)return target();if(void 0===memo[target]){var styleTarget=function(target,parent){return parent?parent.querySelector(target):document.querySelector(target)}.call(this,target,parent);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}}(),singleton=null,singletonCounter=0,stylesInsertedAtTop=[],fixUrls=__webpack_require__(2);function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j],options))}else{var parts=[];for(j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j],options));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list,options){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],part={css:item[1],media:item[2],sourceMap:item[3]};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}function insertStyleElement(options,style){var target=getElement(options.insertInto);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var lastStyleElementInsertedAtTop=stylesInsertedAtTop[stylesInsertedAtTop.length-1];if("top"===options.insertAt)lastStyleElementInsertedAtTop?lastStyleElementInsertedAtTop.nextSibling?target.insertBefore(style,lastStyleElementInsertedAtTop.nextSibling):target.appendChild(style):target.insertBefore(style,target.firstChild),stylesInsertedAtTop.push(style);else if("bottom"===options.insertAt)target.appendChild(style);else{if("object"!=typeof options.insertAt||!options.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var nextSibling=getElement(options.insertAt.before,target);target.insertBefore(style,nextSibling)}}function removeStyleElement(style){if(null===style.parentNode)return!1;style.parentNode.removeChild(style);var idx=stylesInsertedAtTop.indexOf(style);0<=idx&&stylesInsertedAtTop.splice(idx,1)}function createStyleElement(options){var style=document.createElement("style");if(void 0===options.attrs.type&&(options.attrs.type="text/css"),void 0===options.attrs.nonce){var nonce=function getNonce(){0;return __webpack_require__.nc}();nonce&&(options.attrs.nonce=nonce)}return addAttrs(style,options.attrs),insertStyleElement(options,style),style}function addAttrs(el,attrs){Object.keys(attrs).forEach(function(key){el.setAttribute(key,attrs[key])})}function addStyle(obj,options){var style,update,remove,result;if(options.transform&&obj.css){if(!(result="function"==typeof options.transform?options.transform(obj.css):options.transform.default(obj.css)))return function(){};obj.css=result}if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=createStyleElement(options)),update=applyToSingletonTag.bind(null,style,styleIndex,!1),remove=applyToSingletonTag.bind(null,style,styleIndex,!0)}else remove=obj.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(style=function createLinkElement(options){var link=document.createElement("link");return void 0===options.attrs.type&&(options.attrs.type="text/css"),options.attrs.rel="stylesheet",addAttrs(link,options.attrs),insertStyleElement(options,link),link}(options),update=function updateLink(link,options,obj){var css=obj.css,sourceMap=obj.sourceMap,autoFixUrls=void 0===options.convertToAbsoluteUrls&&sourceMap;(options.convertToAbsoluteUrls||autoFixUrls)&&(css=fixUrls(css));sourceMap&&(css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */");var blob=new Blob([css],{type:"text/css"}),oldSrc=link.href;link.href=URL.createObjectURL(blob),oldSrc&&URL.revokeObjectURL(oldSrc)}.bind(null,style,options),function(){removeStyleElement(style),style.href&&URL.revokeObjectURL(style.href)}):(style=createStyleElement(options),update=function applyToTag(style,obj){var css=obj.css,media=obj.media;media&&style.setAttribute("media",media);if(style.styleSheet)style.styleSheet.cssText=css;else{for(;style.firstChild;)style.removeChild(style.firstChild);style.appendChild(document.createTextNode(css))}}.bind(null,style),function(){removeStyleElement(style)});return update(obj),function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}module.exports=function(list,options){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(options=options||{}).attrs="object"==typeof options.attrs?options.attrs:{},options.singleton||"boolean"==typeof options.singleton||(options.singleton=isOldIE()),options.insertInto||(options.insertInto="head"),options.insertAt||(options.insertAt="bottom");var styles=listToStyles(list,options);return addStylesToDom(styles,options),function update(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i];(domStyle=stylesInDom[item.id]).refs--,mayRemove.push(domStyle)}newList&&addStylesToDom(listToStyles(newList,options),options);for(i=0;i<mayRemove.length;i++){var domStyle;if(0===(domStyle=mayRemove[i]).refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var textStore,replaceText=(textStore=[],function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")});function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.css;if(style.styleSheet)style.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=style.childNodes;childNodes[index]&&style.removeChild(childNodes[index]),childNodes.length?style.insertBefore(cssNode,childNodes[index]):style.appendChild(cssNode)}}},function(module,exports){module.exports=function(css){var location="undefined"!=typeof window&&window.location;if(!location)throw new Error("fixUrls requires window.location");if(!css||"string"!=typeof css)return css;var baseUrl=location.protocol+"//"+location.host,currentDir=baseUrl+location.pathname.replace(/\/[^\/]*$/,"/");return css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(fullMatch,origUrl){var newUrl,unquotedOrigUrl=origUrl.trim().replace(/^"(.*)"$/,function(o,$1){return $1}).replace(/^'(.*)'$/,function(o,$1){return $1});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(unquotedOrigUrl)?fullMatch:(newUrl=0===unquotedOrigUrl.indexOf("//")?unquotedOrigUrl:0===unquotedOrigUrl.indexOf("/")?baseUrl+unquotedOrigUrl:currentDir+unquotedOrigUrl.replace(/^\.\//,""),"url("+JSON.stringify(newUrl)+")")})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(40)},function(module,exports,__webpack_require__){__webpack_require__(41),__webpack_require__(42),__webpack_require__(43),__webpack_require__(45),__webpack_require__(47),__webpack_require__(49),__webpack_require__(51),__webpack_require__(53),__webpack_require__(55),__webpack_require__(57),__webpack_require__(59),__webpack_require__(61),__webpack_require__(63),__webpack_require__(65),__webpack_require__(67),__webpack_require__(69),__webpack_require__(71),__webpack_require__(73),__webpack_require__(75),__webpack_require__(76),__webpack_require__(77),__webpack_require__(78),__webpack_require__(79),__webpack_require__(80),__webpack_require__(81),__webpack_require__(82),__webpack_require__(83)},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder",["ncScreenResource","ncUI","ncDataProviders","ncExpressionEvaluator","ncPubsub","ncFieldSetConfigurator","ncFormElements","ncFilters","ncNavigator","ngSanitize"])}()},function(module,exports){!function(){"use strict";angular.element(document).ready(function(){angular.bootstrap(document.getElementById("ncScreenSectionFormBuilder"),["ncScreenSectionFormBuilder"]),angular.bootstrap(document.getElementById("ncScreenSectionFormBuilderTopbar"),["ncScreenSectionFormBuilder"])})}()},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncBooleanPickList",{bindings:{sectionId:"@",field:"<",guid:"@",saveOnChange:"<?",setDefaultValue:"<?"},controller:["screenSection","picklistService","label",function(screenSection,picklistService,label){var ctrl=this;ctrl.labels=label.getLabels(),ctrl.booleanPicklistValue="";ctrl.$onInit=function(){var booleanValue;!1!==ctrl.setDefaultValue&&(ctrl.booleanPicklistValue=!0===(booleanValue=ctrl.field.value)?"true":!1===booleanValue?"false":""),screenSection.registerForSaveNotification(resetPristine),screenSection.registerForCancelNotification(resetValue),resetPristine()},ctrl.onChange=function(currentValue){ctrl.field.value=""===currentValue?null:"true"===currentValue,ctrl.field.isDirty=!(void 0!==ctrl.pristineValue&&ctrl.pristineValue==ctrl.field.value),picklistService.updateCurrentSelectedValue(ctrl.field.guid,ctrl.field.value);var section=screenSection.getSectionByFieldReference(ctrl.field);screenSection.hasConditionalConfiguration(section)&&screenSection.evaluateConditionalSections(ctrl.guid),screenSection.publishEditableFieldChange(ctrl.sectionId,ctrl.field,ctrl.saveOnChange)},ctrl.getPristine=function(){return!ctrl.field.isDirty},ctrl.getNotPristine=function(){return ctrl.field.isDirty};var resetPristine=function(){ctrl.pristineValue=null,ctrl.field.isDirty=!1},resetValue=function(){ctrl.field.value=ctrl.pristineValue,ctrl.field.isDirty=!1}}],template:__webpack_require__(44)})}()},function(module,exports){module.exports="<div> <select ng-model=$ctrl.booleanPicklistValue ng-change=$ctrl.onChange($ctrl.booleanPicklistValue) ng-required=$ctrl.field.isRequired ng-class=\"{\n\t\t\t'input-sm': true,\n\t\t\t'checkbox-inline': true,\n\t\t\t'form-control': true,\n\t\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t\t}\"> <option value=\"\">{{ ::$ctrl.labels.Boolean_Picklist_No_Change }}</option> <option value=true>{{ ::$ctrl.labels.Boolean_Picklist_True }}</option> <option value=false>{{ ::$ctrl.labels.Boolean_Picklist_False }}</option> </select> </div>"},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncDateTimePicker",{bindings:{field:"=",changeEvent:"&",isRequired:"@",isDisabled:"@",isPristine:"="},controller:function(){var internationalize=window.LifeCycle.Internationalize,jsDateTimezoneOffset=internationalize.jsDateTimezoneOffset||0,aggregateTimezoneOffset=internationalize.aggregateTimezoneOffset||0,sfUserTimezoneOffset=internationalize.sfUserTimezoneOffset||0,ctrl=this;function getTimeInMS(date){return 60*date.getHours()*60*1e3+60*date.getMinutes()*1e3+1e3*date.getSeconds()}ctrl.dateValue,ctrl.isTimeValid=!0,ctrl.timeString,ctrl.utcTimeInMS=null,ctrl.utcDateInMS=null,ctrl.$onInit=function(){if(ctrl.field.value){ctrl.dateValue=parseInt(ctrl.field.value)+sfUserTimezoneOffset;var utcDate=new Date(ctrl.dateValue+jsDateTimezoneOffset);ctrl.timeString=internationalize.format(utcDate,internationalize.formats.datetime.SHORT_TIME)}},ctrl.updateDateTimeValue=function(){internationalize.parseDate(ctrl.timeString,internationalize.getCalendars().standard.patterns.SHORT_TIME);null!==ctrl.utcDateInMS&&null!==ctrl.utcTimeInMS?(ctrl.field.value=ctrl.utcDateInMS+ctrl.utcTimeInMS-sfUserTimezoneOffset,ctrl.changeEvent()):null!==ctrl.utcDateInMS&&null===ctrl.utcTimeInMS&&(ctrl.field.value=ctrl.utcDateInMS+432e5-aggregateTimezoneOffset+jsDateTimezoneOffset,ctrl.changeEvent())},ctrl.onTimeChange=function(){var nonUtcTime=internationalize.parseDate(ctrl.timeString,internationalize.getCalendars().standard.patterns.SHORT_TIME);if(null!=nonUtcTime){ctrl.utcTimeInMS=getTimeInMS(nonUtcTime);var date=new Date(parseInt(ctrl.dateValue));ctrl.utcDateInMS=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),0,0,0,0).getTime(),ctrl.utcDateInMS=ctrl.utcDateInMS-jsDateTimezoneOffset,ctrl.updateDateTimeValue(),ctrl.isTimeValid=!0}else ctrl.isTimeValid=!1},ctrl.onDateChange=function(){if(void 0!==ctrl.dateValue&&null!==ctrl.dateValue){var nonUtcTime=internationalize.parseDate(ctrl.timeString,internationalize.getCalendars().standard.patterns.SHORT_TIME);ctrl.utcDateInMS=parseInt(ctrl.dateValue),null!=nonUtcTime&&(ctrl.utcTimeInMS=getTimeInMS(nonUtcTime)),ctrl.updateDateTimeValue()}}},template:__webpack_require__(46)})}()},function(module,exports){module.exports="<span class=datetimepicker-container_form-group> <div class=datetimepicker-container_date> <input ng-model=$ctrl.dateValue ng-change=$ctrl.onDateChange() ng-required=$ctrl.isRequired ng-disabled=$ctrl.isDisabled intlinputdate=true type=text ng-class=\"{\n\t\t\t\t'input-sm': true,\n\t\t\t\t'form-control': true,\n\t\t\t\t'nc-pristine': $ctrl.isPristeine(),\n\t\t\t\t'nc-not-pristine': !$ctrl.isPristeine()\n\t\t\t}\"/> <span class=datetimepicker-container_icon-date> <i class=\"glyphicon glyphicon-calendar\"></i> </span> </div> <div class=datetimepicker-container_time ng-class=\"{'has-error': !$ctrl.isTimeValid}\"> <input ng-model=$ctrl.timeString ng-change=$ctrl.onTimeChange() ng-required=$ctrl.isRequired ng-disabled=$ctrl.isDisabled ng-class=\"{\n\t\t\t\t\t'input-sm': true,\n\t\t\t\t\t'form-control': true,\n\t\t\t\t\t'nc-pristine': $ctrl.isPristeine(),\n\t\t\t\t\t'nc-not-pristine': !$ctrl.isPristeine()\n\t\t\t}\" type=text>  <span class=datetimepicker-container_icon-time> <i class=\"glyphicon glyphicon-time\"></i> </span> </div> </span>"},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncEditableField",{bindings:{sectionId:"@",guid:"@",field:"<",contextId:"@?",saveOnChange:"<?",booleanAsPicklist:"<?",setBooleanPicklistDefaults:"<?",index:"@"},controller:["fieldType","screenSection","picklistService","label",function(fieldType,screenSection,picklistService,label){var ctrl=this;ctrl.labels=label.getLabels(),ctrl.position="slds-dropdown--left",ctrl.$onInit=function(){screenSection.registerForSaveNotification(resetPristine),screenSection.registerForCancelNotification(resetValue),resetPristine(),"BOOLEAN"===ctrl.field.fieldType&&picklistService.updateCurrentSelectedValue(ctrl.field.guid,ctrl.field.value),ctrl.index&&parseInt(ctrl.index,10)&&ctrl.index%2==1&&(ctrl.position="slds-dropdown--right")};var resetPristine=function(){ctrl.pristineValue=ctrl.field.value,ctrl.field.isDirty=!1},resetValue=function(){ctrl.field.value=ctrl.pristineValue,ctrl.field.isDirty=!1};ctrl.fieldType=fieldType,ctrl.onChange=function(){ctrl.field.isDirty=!(ctrl.pristineValue&&ctrl.pristineValue==ctrl.field.value),screenSection.evaluateConditionalSections(ctrl.guid),"BOOLEAN"===ctrl.field.fieldType&&picklistService.updateCurrentSelectedValue(ctrl.field.guid,ctrl.field.value),screenSection.publishEditableFieldChange(ctrl.sectionId,ctrl.field,ctrl.saveOnChange)},ctrl.getPristine=function(){return!ctrl.field.isDirty},ctrl.getNotPristine=function(){return ctrl.field.isDirty}}],template:__webpack_require__(48)})}()},function(module,exports){module.exports="<input ng-if=$ctrl.fieldType.isText($ctrl.field.fieldType) ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled aria-label=\"{{ ::$ctrl.field.fieldLabel }}\" type=text ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <div class=input-group ng-if=\"$ctrl.fieldType.isCheckBox($ctrl.field.fieldType) && $ctrl.booleanAsPicklist\"> <nc-boolean-pick-list section-id={{$ctrl.sectionId}} guid={{$ctrl.guid}} field=$ctrl.field class=slds-size--1-of-1 save-on-change=::$ctrl.saveOnChange set-default-value=$ctrl.setBooleanPicklistDefaults> </nc-boolean-pick-list> </div> <div class=input-group ng-if=\"$ctrl.fieldType.isCheckBox($ctrl.field.fieldType) && !$ctrl.booleanAsPicklist\"> <input ng-model=$ctrl.field.value ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled ng-change=$ctrl.onChange() type=checkbox ng-class=\"{\n\t\t\t'input-sm': true,\n\t\t\t'checkbox-inline': true,\n\t\t\t'form-control': true,\n\t\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t\t}\"/> <span class=“slds-checkbox--faux”></span> <span ng-bind=::item.label /> </div> <input ng-if=$ctrl.fieldType.isComboBox($ctrl.field.fieldType) ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled type=text ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <input ng-if=$ctrl.fieldType.isCurrency($ctrl.field.fieldType) ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled type=text inputcurrency=true ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <div ng-if=$ctrl.fieldType.isDate($ctrl.field.fieldType)> <nds-input-datepicker id=\"{{$ctrl.guid + $ctrl.field.guid}}-calendarAddOnEditModal\" prev-label={{::$ctrl.labels.Previous_Month}} next-label={{::$ctrl.labels.Next_Month}} disabled=$ctrl.field.isDisabled required=$ctrl.field.isRequired select-date-label={{::$ctrl.labels.Select_A_Date}} select-year-label={{::$ctrl.labels.Select_A_Year}} today-button-label={{::$ctrl.labels.Today}} nds-date-value=$ctrl use-milliseconds=true calendar-class={{$ctrl.position}}> </nds-input-datepicker> </div> <div class=input-group ng-if=$ctrl.fieldType.isDateTime($ctrl.field.fieldType)> <nds-input-datetime id=\"{{$ctrl.guid + $ctrl.field.guid}}-calendarAddOnEditModal\" prev-label={{::$ctrl.labels.Previous_Month}} next-label={{::$ctrl.labels.Next_Month}} disabled=$ctrl.field.isDisabled required=$ctrl.field.isRequired select-date-label={{::$ctrl.labels.Select_A_Date}} select-year-label={{::$ctrl.labels.Select_A_Year}} today-button-label={{::$ctrl.labels.Today}} nds-date-value=$ctrl use-milliseconds=true calendar-class={{$ctrl.position}}> </nds-input-datetime> </div> <input ng-if=$ctrl.fieldType.isDouble($ctrl.field.fieldType) ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled type=text inputnumber=true scale=$ctrl.field.scale ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <input ng-if=$ctrl.fieldType.isEmail($ctrl.field.fieldType) ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled ng-model-options=\"{ allowInvalid: true }\" type=email ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <input ng-if=$ctrl.fieldType.isEncryptedString($ctrl.field.fieldType) ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled type=text ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <input ng-if=$ctrl.fieldType.isId($ctrl.field.fieldType) ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled type=text ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <input ng-if=$ctrl.fieldType.isInteger($ctrl.field.fieldType) ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled type=text inputnumber=true scale=$ctrl.field.scale ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <nc-pick-list ng-if=$ctrl.fieldType.isPicklist($ctrl.field.fieldType) section-id={{$ctrl.sectionId}} guid={{$ctrl.guid}} field=$ctrl.field save-on-change=::$ctrl.saveOnChange></nc-pick-list> <nc-multi-select-pick-list ng-if=$ctrl.fieldType.isMultiPicklist($ctrl.field.fieldType) section-id={{$ctrl.sectionId}} guid={{$ctrl.guid}} field=$ctrl.field save-on-change=::$ctrl.saveOnChange></nc-multi-select-pick-list> <div class=input-group ng-if=$ctrl.fieldType.isPercent($ctrl.field.fieldType)> <span class=input-group-addon>%</span> <input ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled type=text inputnumber=true scale=$ctrl.field.scale ng-class=\"{\n\t\t\t'input-sm': true,\n\t\t\t'form-control': true,\n\t\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t\t}\"/> </div> <div class=input-group ng-if=$ctrl.fieldType.isPhone($ctrl.field.fieldType)> <span class=input-group-addon><i class=\"glyphicon glyphicon-earphone\"></i></span> <input ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled type=tel ng-class=\"{\n\t\t\t'input-sm': true,\n\t\t\t'form-control': true,\n\t\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t\t}\"/> </div> <nc-lookup-search ng-if=$ctrl.fieldType.isReference($ctrl.field.fieldType) section-id={{$ctrl.sectionId}} field=$ctrl.field save-on-change=::$ctrl.saveOnChange></nc-lookup-search> <textarea ng-if=\"$ctrl.fieldType.isTextarea($ctrl.field.fieldType, $ctrl.field.isHtmlFormatted)\" ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <textarea ng-if=\"$ctrl.fieldType.isRichText($ctrl.field.fieldType, $ctrl.field.isHtmlFormatted)\" ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled rich-text-editor=true ng-class=\"{\n\t\t'input-sm': true,\n\t\t'form-control': true,\n\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t}\"/> <div class=input-group ng-if=$ctrl.fieldType.isUrl($ctrl.field.fieldType)> <span class=input-group-addon><i class=\"glyphicon glyphicon-globe\"></i></span> <input ng-model=$ctrl.field.value ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired ng-disabled=$ctrl.field.isDisabled ng-model-options=\"{allowInvalid: true}\" type=url ng-class=\"{\n\t\t\t'input-sm': true,\n\t\t\t'form-control': true,\n\t\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t\t}\"/> </div>"},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncEditableFieldTemplate",{bindings:{sectionId:"@",guid:"@",field:"<",contextId:"@?",saveOnChange:"<?",booleanAsPicklist:"<?",setBooleanPicklistDefaults:"<?",index:"@"},template:__webpack_require__(50)})}()},function(module,exports){module.exports='<div class=row> <div class="col-xs-12 content-body"> <nc-editable-field section-id={{$ctrl.sectionId}} guid={{$ctrl.guid}} index={{$ctrl.index}} field=$ctrl.field context-id={{$ctrl.contextId}} save-on-change=::$ctrl.saveOnChange boolean-as-picklist=$ctrl.booleanAsPicklist set-boolean-picklist-defaults=$ctrl.setBooleanPicklistDefaults> </nc-editable-field> </div> </div>'},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncFieldLabelTemplate",{bindings:{field:"<",label:"@",sectionId:"@?",isRequired:"<",isTruncated:"<?",inlineHelpText:"@?",enableFieldAccess:"<?"},controller:["dataCache","label","pubsub",function(dataCache,label,pubsub){var ctrl=this;ctrl.labels=label.getLabels(),ctrl.targetFieldLabel="",ctrl.filterLabel="",function subscribeToLabelModified(){pubsub.subscribe(LifeCycle.Topics.ScreenSectionFormBuilder.LABEL_MODIFIED,function(lookupFilterLabel){ctrl.filteredFieldId=lookupFilterLabel.fieldId,ctrl.filterLabel=lookupFilterLabel.filterLabel})}(),ctrl.initCondScreenSection=function(){return["/add-conditional-screen-section",dataCache.get("groupId"),dataCache.get("routeId"),ctrl.sectionId].join("/")},ctrl.getEditFacHash=function(){return["/edit-fac-route",dataCache.get("groupId"),ctrl.sectionId,ctrl.field.guid].join("/")}}],template:__webpack_require__(52)})}()},function(module,exports){module.exports='<div class="content-label slds-p-bottom--xx-small"> <span ng-show=$ctrl.inlineHelpText popover=popover data-toggle=popover data-content={{$ctrl.inlineHelpText}} class="fa fa-info-circle slds-show--inline"> </span> <label ng-bind=$ctrl.label class="form-control-static input-sm slds-show--inline" ng-class="{\'is-required\': $ctrl.isRequired, \'pull-left\': $ctrl.enableFieldAccess}"> </label> <span ng-show="$ctrl.field.guid == $ctrl.filteredFieldId && $ctrl.filterLabel" popover=popover data-toggle=popover data-content={{$ctrl.filterLabel}} class="fa fa-info-circle slds-show--inline"> </span> <span class=slds-p-left--medium ng-if="!$ctrl.field.isVisible && $ctrl.enableFieldAccess"> <svg-icon icon=utility/hide svg-class="slds-icon slds-icon--x-small" background-color=none fill-color=#54698d title={{::$ctrl.labels.Hidden_Field}}> </svg-icon> <span class=slds-assistive-text>{{::$ctrl.labels.Hidden_Field}}</span> </span> <div class=pull-right ng-if=$ctrl.enableFieldAccess> <a href=#{{$ctrl.initCondScreenSection()}}> <svg-icon icon=utility/new svg-class="slds-icon slds-icon--x-small" background-color=none fill-color=#54698d hover-color=#0070d2 ng-mouseover=updateStyle(true) title={{::$ctrl.labels.Add_New_Child_Screen_Section}}> </svg-icon> <span class=slds-assistive-text>{{::$ctrl.labels.Add_New_Child_Screen_Section}}</span> </a> <a class=slds-p-left--x-small href=#{{$ctrl.getEditFacHash()}}> <svg-icon icon=utility/settings svg-class="slds-icon slds-icon--x-small" background-color=none fill-color=#54698d hover-color=#0070d2 title={{::$ctrl.labels.Edit_Field_Configuration}}> </svg-icon> <span class=slds-assistive-text>{{::$ctrl.labels.Edit_Field_Configuration}}</span> </a> </div> </div> '},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncFormGroupTemplate",{bindings:{sectionId:"@",guid:"@",field:"<",contextId:"@?",enableFieldAccess:"<?",saveOnChange:"<?",booleanAsPicklist:"<?",setBooleanPicklistDefaults:"<?",index:"@"},controller:["screenSection",function(screenSection){var ctrl=this;ctrl.getScreenSection=function(){return screenSection.isSelectedChild()?screenSection.getSelectedChild():screenSection.get(ctrl.sectionId)},ctrl.isReadOnly=function(){var fieldConfigData=screenSection.getFieldConfigurationData(ctrl.field);return!(!ctrl.field.isReadOnly||ctrl.field.isDisabled)||!(fieldConfigData&&fieldConfigData.fieldConfigIsEditable&&screenSection.formBuilder.getIsEditing())&&!!screenSection.isReadOnly(ctrl.getScreenSection())}}],template:__webpack_require__(54)})}()},function(module,exports){module.exports='<div class="form-group col-xs-6"> <nc-field-label-template section-id={{$ctrl.sectionId}} field=$ctrl.field inline-help-text={{::$ctrl.field.inlineHelpText}} label={{::$ctrl.field.fieldLabel}} is-required=$ctrl.field.isRequired enable-field-access=$ctrl.enableFieldAccess> </nc-field-label-template> <nc-editable-field-template ng-if=!$ctrl.isReadOnly() section-id={{$ctrl.sectionId}} guid={{$ctrl.guid}} field=$ctrl.field index={{$ctrl.index}} context-id={{$ctrl.contextId}} save-on-change=::$ctrl.saveOnChange boolean-as-picklist=$ctrl.booleanAsPicklist set-boolean-picklist-defaults=$ctrl.setBooleanPicklistDefaults> </nc-editable-field-template> <nc-read-only-field-template ng-if=$ctrl.isReadOnly() section-id={{$ctrl.sectionId}} guid={{$ctrl.guid}} field=$ctrl.field context-id={{$ctrl.contextId}} boolean-as-picklist=$ctrl.booleanAsPicklist> </nc-read-only-field-template> </div>'},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncLookupSearch",{bindings:{sectionId:"@",field:"<",saveOnChange:"<?"},controller:["screenSection","screenSectionFormBuilderRemoting","messageService","pubsub","label",function(screenSection,screenSectionFormBuilderRemoting,messageService,pubsub,label){var ctrl=this;function getResourceForField(resources){for(var crIndex=0,crLen=resources.length;crIndex<crLen;crIndex++){var resource=resources[crIndex];if(resource.hasOwnProperty("propertyBag")&&resource.propertyBag[ctrl.field.guid].$$hashKey==ctrl.field.$$hashKey)return resource}return null}function resetOnSave(){ctrl.cachedValue=ctrl.field.value,ctrl.field.isDirty=!1}function resetOnCancel(){ctrl.field.value=ctrl.cachedValue,ctrl.field.isDirty=!1,screenSection.evaluateConditionalSections(ctrl.guid)}function publishLookupResults(payload){pubsub.publish(LifeCycle.Topics.ScreenSectionFormBuilder.LOOKUP_MODIFIED,payload),screenSection.publishEditableFieldChange(ctrl.sectionId,ctrl.field,ctrl.saveOnChange)}ctrl.labels=label.getLabels(),ctrl.targetFieldLabel="",ctrl.searchResults={},ctrl.hasSearchResults=!1,ctrl.isSearching=!1,ctrl.cachedValue="",ctrl.$onInit=function(){screenSection.registerForSaveNotification(resetOnSave),screenSection.registerForCancelNotification(resetOnCancel),ctrl.cachedValue=ctrl.field.value},ctrl.onClick=function(){ctrl.isSearching=!1},ctrl.onChange=function(){void 0===ctrl.field.displayValue||0===ctrl.field.displayValue.length?(ctrl.field.value="",ctrl.field.displayValue="",ctrl.field.isDirty=!0,publishLookupResults({action:"CLEAR_VALUES",referenceContext:ctrl.field.referenceContext})):ctrl.doLookup()},ctrl.doLookup=function(){ctrl.field.displayValue.length<=1||(ctrl.isSearching=!1,ctrl.findRecords())},ctrl.getScreenResource=function(section){var screenResource=_.first(_.values(section.screenResources));if(screenResource)return screenResource},ctrl.getVisibleColumns=function(bag){return screenSection.filterPropertyBag(bag)},ctrl.findRecords=function(){var jsonResource=ctrl.initializeJsonResource();null!=jsonResource&&screenSectionFormBuilderRemoting.getSearchResults(jsonResource).then(function(screenResource){ctrl.searchResults={},ctrl.hasSearchResults=!1,screenResource&&screenResource.children&&0<screenResource.children.length&&(ctrl.hasSearchResults=!0,(ctrl.searchResults=screenResource).filter&&function publishLabelFilteredBy(payload){pubsub.publish(LifeCycle.Topics.ScreenSectionFormBuilder.LABEL_MODIFIED,payload)}({fieldId:Object.values(ctrl.searchResults.propertyBag)[0].guid,filterLabel:screenResource.filter.displayLabel})),ctrl.isSearching=!0},function(error){messageService.setMessage({type:messageService.messageTypes.error,text:error},!0)})},ctrl.getRecord=function(propertyBag){var idField,nameField;if(propertyBag)for(var i=0;i<propertyBag.length;i++)screenSection.isRecordIdField(propertyBag[i])?idField=propertyBag[i].value:screenSection.isNameField(propertyBag[i])&&(nameField=propertyBag[i].value);return[idField,nameField]},ctrl.setSelectedId=function(propertyBag){var targetField=ctrl.getRecord(_.values(propertyBag));targetField&&(ctrl.field.value=targetField[0],ctrl.field.displayValue=targetField[1],ctrl.field.isDirty=!(ctrl.cachedValue==ctrl.field.value),screenSection.evaluateConditionalSections(ctrl.guid)),ctrl.isSearching=!1,publishLookupResults({action:"UPDATE_VALUES",referenceContext:ctrl.field.referenceContext,content:propertyBag})},ctrl.initializeJsonResource=function(){var parentContextId,currentResource=function getResourceByField(){var section=screenSection.getSectionByFieldReference(ctrl.field);if(null!=section)return ctrl.getScreenResource(section)}();if(null==currentResource&&(currentResource=function getResourceFromChildren(){var childResources=screenSection.getChildren(ctrl.sectionId);if(childResources&&0<childResources.length)return getResourceForField(childResources)}()),null==currentResource&&(currentResource=function getResourceFromAllSections(){if(screenSection.screenSections){var sections=_.values(screenSection.screenSections);if(0<sections.length)return getResourceForField(sections)}}()),null==currentResource)return null;var sections=_.values(screenSection.screenSections);0<sections.length&&(parentContextId=sections[0].contextObject?sections[0].contextObject.Id:null);var bag={};return bag[ctrl.field.guid]=ctrl.field,{apexType:currentResource.apexType,propertyBag:bag,children:[],configuration:currentResource.configuration,contextId:currentResource.contextId,parentContextId:parentContextId}},ctrl.getPristine=function(){return!ctrl.field.isDirty},ctrl.getNotPristine=function(){return ctrl.field.isDirty}}],template:__webpack_require__(56)})}()},function(module,exports){module.exports='<div class=input-group> <input ng-model=$ctrl.field.displayValue ng-model-options=" { debounce: 500 }" ng-click=$ctrl.onClick() ng-change=$ctrl.onChange() ng-required=$ctrl.field.isRequired type=lookup ng-class="{\n\t\t\t\'input-sm\': true,\n\t\t\t\'form-control\': true,\n\t\t\t\'nc-pristine\': $ctrl.getParentPristine(),\n\t\t\t\'nc-not-pristine\': $ctrl.getParentNotPristine()\n\t\t}"/> <span class=input-group-addon><i class="glyphicon glyphicon-search"/></span> <span class=slds-assistive-text>{{ ::$ctrl.labels.Type_to_Search }}</span> </div> <div class="modal-field-dropdown slds-is-absolute slds-card slds-scrollable--x" ng-if="$ctrl.hasSearchResults && $ctrl.isSearching"> <div class=slds-card__body> <table class="slds-table slds-table--bordered slds-table--cell-buffer"> <thead> <tr> <th ng-repeat="(key,field) in $ctrl.getVisibleColumns($ctrl.searchResults.children[0].propertyBag)" ng-bind=field.fieldLabel ng-if=field.isVisible /> </tr> </thead> <tbody> <tr ng-repeat="child in $ctrl.searchResults.children" ng-click=$ctrl.setSelectedId(child.propertyBag)> <td ng-repeat="(key,field) in $ctrl.getVisibleColumns(child.propertyBag)" ng-bind=field.value ng-if=field.isVisible /> </tr> </tbody> </table> </div> </div> <div class="ui-lookup-results slds-is-absolute slds-card" ng-if="!$ctrl.hasSearchResults && $ctrl.isSearching"> <div class=slds-card__body> <table class="slds-table slds-table--bordered slds-table--cell-buffer"> <thead> <tr> <th></th> </tr> </thead> <tbody> <tr> <td><span>{{ ::$ctrl.labels.No_Results }}</span></td> </tr> </tbody> </table> </div> </div>'},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncMultiSelectPickList",{bindings:{sectionId:"@",guid:"@",field:"<",saveOnChange:"<?"},controller:["visualForceMarkup","picklistService","screenSection",function(visualForceMarkup,picklistService,screenSection){var ctrl=this;function isAvailableInDependency(optionValue){if(!ctrl.field.isDependent)return!0;if(ctrl.dependentSet)for(var dsIndex=0,dsLen=ctrl.dependentSet.length;dsIndex<dsLen;dsIndex++)if(ctrl.dependentSet[dsIndex].value==optionValue)return!0;return!1}function getSelectedItems(){var toReturn=[];if(ctrl.field.value){var multiSelectLabels=ctrl.field.value.split(";");toReturn=ctrl.items.filter(function(item){return 0<=multiSelectLabels.indexOf(item.key)})}return toReturn}function setSelectedCheckboxItems(){var selectedItems=getSelectedItems();if(selectedItems)for(var index=0;index<selectedItems.length;index++)selectedItems[index].isChecked=!0}function cacheInitialValues(){ctrl.initialValue=ctrl.field.value,ctrl.cachedValues=getSelectedItems()}function resetOnSave(){cacheInitialValues(),resetDirty()}function resetOnCancel(){ctrl.field.value=ctrl.initialValue,setSelectedCheckboxItems(),picklistService.updateCurrentSelectedValue(ctrl.field.guid,ctrl.field.value),resetDirty(),screenSection.evaluateConditionalSections(ctrl.guid)}function resetDirty(){for(var itemIndex=0,itemLen=ctrl.items.length;itemIndex<itemLen;itemIndex++)ctrl.items[itemIndex].setPristine(!0);ctrl.field.isDirty=!1}function MultiselectItem(key,label,isChecked,active,available){this.isChecked=isChecked,this.active=active,this.available=available,this.key=key,this.label=label,this.isPristine=!0}ctrl.cachedValues=[],ctrl.items=[],ctrl.controlData=null,ctrl.dependentSet=[],ctrl.controllingFields=[],ctrl.initialValue="",ctrl.recordTypeOptionAvailable=function(optionValue){return ctrl.controlData&&ctrl.controlData.optionValues&&0<ctrl.controlData.optionValues.length?-1!==ctrl.controlData.optionValues.indexOf(optionValue):!!(ctrl.controlData&&ctrl.controlData.mapValues&&0<ctrl.controlData.mapValues.length)&&-1!==ctrl.controlData.mapValues.indexOf(optionValue)},ctrl.resetOptions=function(newControllingValue){ctrl.controllingValue=newControllingValue;for(var found=!1,cfldIndex=0,cfldLen=ctrl.controllingFields.length;cfldIndex<cfldLen;cfldIndex++)if(ctrl.controllingFields[cfldIndex].controllingField==newControllingValue){ctrl.dependentSet=ctrl.controllingFields[cfldIndex].dependentFields,found=!0;break}found||(ctrl.dependentSet=null),function rebuildCheckboxItems(){for(var cbiIndex=0,cbiLen=ctrl.items.length;cbiIndex<cbiLen;cbiIndex++)ctrl.items[cbiIndex].active&&ctrl.recordTypeOptionAvailable(ctrl.items[cbiIndex].key)&&isAvailableInDependency(ctrl.items[cbiIndex].key)?ctrl.items[cbiIndex].available=!0:ctrl.items[cbiIndex].isChecked?(ctrl.items[cbiIndex].isChecked=!1,ctrl.items[cbiIndex].available=!1,ctrl.items[cbiIndex].isPristine=!1,ctrl.onChange(ctrl.items[cbiIndex])):ctrl.items[cbiIndex].available=!1;setSelectedCheckboxItems()}()},ctrl.$onInit=function(){if(ctrl.field){var section=screenSection.getSectionByFieldReference(ctrl.field);ctrl.sectionId=section&&section.screenSectionId?section.screenSectionId:ctrl.sectionId,screenSection.registerForSaveNotification(resetOnSave),screenSection.registerForCancelNotification(resetOnCancel),ctrl.controlData=visualForceMarkup.getControlData(ctrl.sectionId,ctrl.field.guid),ctrl.field.isDependent&&(!function buildControllingFields(){var availableOptions=ctrl.field.options.filter(function(option){return ctrl.recordTypeOptionAvailable(option.value)});ctrl.controllingFields=picklistService.buildControllingFields(ctrl.controlData.maps,availableOptions)}(),picklistService.registerCallback(ctrl.field.guid,ctrl.field.controllingGuid,ctrl.resetOptions),ctrl.resetOptions(picklistService.getControllerSelectedValue(ctrl.field.controllingGuid))),function buildCheckboxItems(){for(var index=0;index<ctrl.field.options.length;index++)ctrl.items.push(new MultiselectItem(ctrl.field.options[index].value,ctrl.field.options[index].label,!1,ctrl.field.options[index].active,ctrl.field.options[index].active&&ctrl.recordTypeOptionAvailable(ctrl.field.options[index].value)&&isAvailableInDependency(ctrl.field.options[index].value)))}(),setSelectedCheckboxItems(),picklistService.updateCurrentSelectedValue(ctrl.field.guid,ctrl.field.value),cacheInitialValues()}},ctrl.onChange=function(changedItem){ctrl.field.value=ctrl.items.filter(function(item){return!0===item.isChecked}).map(function(item){return item.key}).join(";"),ctrl.field.isDirty=ctrl.field.value!=ctrl.initialValue,-1!==this.cachedValues.indexOf(changedItem)&&changedItem.isChecked||-1===this.cachedValues.indexOf(changedItem)&&!changedItem.isChecked?changedItem.setPristine(!0):changedItem.setPristine(!1),screenSection.evaluateConditionalSections(ctrl.guid),screenSection.publishEditableFieldChange(ctrl.sectionId,ctrl.field,ctrl.saveOnChange)},ctrl.isReadOnly=function(){return ctrl.field.isReadOnly||screenSection.isReadOnly(ctrl.getScreenSection())},ctrl.getScreenSection=function(){return screenSection.isSelectedChild()?screenSection.getSelectedChild():screenSection.getSectionByFieldReference(ctrl.field)},MultiselectItem.prototype.getPristine=function(){return this.isPristine},MultiselectItem.prototype.getNotPristine=function(){return!this.isPristine},MultiselectItem.prototype.setPristine=function(value){this.isPristine=value}}],template:__webpack_require__(58)})}()},function(module,exports){module.exports="<div ng-repeat=\"item in $ctrl.items | filter: {available:true}\"> <label class=field-input-label> <input ng-disabled=$ctrl.isReadOnly() ng-model=item.isChecked type=checkbox ng-change=$ctrl.onChange(item) ng-class=\"{\n\t\t\t\t'input-sm': true,\n\t\t\t\t'checkbox-inline': true,\n\t\t\t\t'form-control': true,\n\t\t\t\t'nc-pristine': item.getPristine(),\n\t\t\t\t'nc-not-pristine': item.getNotPristine()\n\t\t\t}\"/> <span ng-bind=::item.label /> </label> </div>"},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncPickList",{bindings:{sectionId:"@",guid:"@",field:"<",saveOnChange:"<?"},controller:["visualForceMarkup","picklistService","screenSection","label",function(visualForceMarkup,picklistService,screenSection,label){var ctrl=this;ctrl.controllingValue=null,ctrl.labels=label.getLabels(),ctrl.cachedValue=null;var buildFilteredOptions=function(){for(var found=!1,index=0;index<ctrl.field.options.length;index++)ctrl.field.options[index].available=ctrl.field.options[index].active&&ctrl.recordTypeOptionAvailable(ctrl.field.options[index].value)&&isAvailableInDependency(ctrl.field.options[index].value),ctrl.field.value===ctrl.field.options[index].value&&(found=!0);found||void 0===ctrl.field.value||null===ctrl.field.value||ctrl.field.options.push({label:ctrl.field.value,value:ctrl.field.value,defaultValue:!0,active:!0,available:!0})};ctrl.recordTypeOptionAvailable=function(optionValue){var isTarget=ctrl.controlData&&ctrl.controlData.optionValues&&1<ctrl.controlData.optionValues.length;return isTarget?-1!==ctrl.controlData.optionValues.indexOf(optionValue):!!(isTarget=ctrl.controlData&&ctrl.controlData.mapValues&&0<ctrl.controlData.mapValues.length)&&-1!==ctrl.controlData.mapValues.indexOf(optionValue)};var isAvailableInDependency=function(optionValue){if(!ctrl.field.isDependent)return!0;if(ctrl.dependentSet)for(var dsIndex=0,dsLen=ctrl.dependentSet.length;dsIndex<dsLen;dsIndex++)if(ctrl.dependentSet[dsIndex].value==optionValue)return!0;return!1},resetOnSave=function(){ctrl.cachedValue=ctrl.field.value,ctrl.field.isDirty=!1},resetOnCancel=function(){ctrl.field.value=ctrl.cachedValue,ctrl.field.isDirty=!1,screenSection.evaluateConditionalSections(ctrl.guid)},resetDependentOptions=function(){var availableOptions;ctrl.field.isDependent?(availableOptions=ctrl.field.options.filter(function(option){return ctrl.recordTypeOptionAvailable(option.value)}),ctrl.controllingFields=picklistService.buildControllingFields(ctrl.controlData.maps,availableOptions),picklistService.registerCallback(ctrl.field.guid,ctrl.field.controllingGuid,ctrl.resetOptions),ctrl.resetOptions(picklistService.getControllerSelectedValue(ctrl.field.controllingGuid))):buildFilteredOptions()};ctrl.resetOptions=function(newControllingValue){ctrl.controllingValue=newControllingValue;for(var found=!1,cfldIndex=0,cfldLen=ctrl.controllingFields.length;cfldIndex<cfldLen;cfldIndex++)if(ctrl.controllingFields[cfldIndex].controllingField==newControllingValue){ctrl.dependentSet=ctrl.controllingFields[cfldIndex].dependentFields,found=!0;break}found||(ctrl.dependentSet=null),buildFilteredOptions(),ctrl.onChange()},ctrl.onChange=function(){picklistService.updateCurrentSelectedValue(ctrl.field.guid,ctrl.field.value),ctrl.field.isDirty=ctrl.cachedValue!=ctrl.field.value;var section=screenSection.getSectionByFieldReference(ctrl.field);screenSection.hasConditionalConfiguration(section)&&screenSection.evaluateConditionalSections(ctrl.guid),screenSection.publishEditableFieldChange(ctrl.sectionId,ctrl.field,ctrl.saveOnChange)},ctrl.getPristine=function(){return!ctrl.field.isDirty},ctrl.getNotPristine=function(){return ctrl.field.isDirty},ctrl.$onInit=function(){if(ctrl.field){var section=screenSection.getSectionByFieldReference(ctrl.field);ctrl.sectionId=section&&section.screenSectionId?section.screenSectionId:ctrl.sectionId,screenSection.registerForSaveNotification(resetOnSave),screenSection.registerForCancelNotification(resetOnCancel),ctrl.cachedValue=ctrl.field.value,ctrl.controlData=visualForceMarkup.getControlData(ctrl.sectionId,ctrl.field.guid),resetDependentOptions(),picklistService.updateCurrentSelectedValue(ctrl.field.guid,ctrl.field.value),ctrl.showNonePicklistValue="CurrencyIsoCode"!==ctrl.field.fieldName}}}],template:__webpack_require__(60)})}()},function(module,exports){module.exports="<div> <select ng-model=$ctrl.field.value ng-required=$ctrl.field.isRequired ng-options=\"option.value as option.label for option in $ctrl.field.options | filter: {available:true}\" ng-change=$ctrl.onChange() ng-class=\"{\n\t\t\t'input-sm': true,\n\t\t\t'checkbox-inline': true,\n\t\t\t'form-control': true,\n\t\t\t'nc-pristine': $ctrl.getPristine(),\n\t\t\t'nc-not-pristine': $ctrl.getNotPristine()\n\t\t}\"> <option ng-if=$ctrl.showNonePicklistValue value=\"\">{{$ctrl.labels.Picklist_Select_Prompt}}</option> </select> </div>"},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncReadOnlyField",{bindings:{guid:"@?",field:"<",contextId:"@?",resource:"<?",destyleReferenceField:"<?",newWindow:"<?",booleanAsPicklist:"<?",isoCode:"@",isTruncated:"<?",isWrapText:"<?"},controller:["fieldType","navigator","screenSection","picklistService","label",function(fieldType,navigator,screenSection,picklistService,label){var ctrl=this;ctrl.labels=label.getLabels(),ctrl.$onInit=function(){ctrl.fieldType=fieldType,"MULTIPICKLIST"===ctrl.field.fieldType?ctrl.setPicklistDisplayValue(!0):"PICKLIST"===ctrl.field.fieldType?(ctrl.setPicklistDisplayValue(!1),picklistService.updateCurrentSelectedValue(ctrl.field.guid,ctrl.field.value)):"DATE"===ctrl.field.fieldType||"DATETIME"===ctrl.field.fieldType?"string"==typeof ctrl.field.value&&(ctrl.field.value=Number(ctrl.field.value)):"BOOLEAN"===ctrl.field.fieldType&&"string"==typeof ctrl.field.value&&(ctrl.field.value="true"===ctrl.field.value)},ctrl.navigateToSObject=function(record,evt,openWindow){return navigator.navigateToSObject(record,"detail",evt,openWindow)},ctrl.navigateToURL=function(url,redirect){return navigator.navigateToURL(url,redirect)},ctrl.resolveSObjectURL=function(record,mode){return navigator.resolveSObjectURL(record,mode)},ctrl.setPicklistDisplayValue=function(isMulti){if(ctrl.field.value){for(var values=isMulti?ctrl.field.value.split(";"):[ctrl.field.value],displayValues=[],valueFound=!1,i=0,j=values.length;i<j;i++)for(var k=0,l=ctrl.field.options.length;k<l;k++){var option=ctrl.field.options[k];if(option.value===values[i]){valueFound=!0,displayValues.push(option.label);break}}valueFound||1!==values.length||displayValues.push(values[0]),ctrl.field.displayValue=displayValues.join("; ")}else ctrl.field.displayValue=ctrl.field.value},ctrl.getCurrencyIsoCode=function(){var fields=function getFields(){if(ctrl.resource)return screenSection.filterPropertyBag(ctrl.resource.propertyBag);return screenSection.formBuilder.getFields(ctrl.guid)}(),currencyFieldGuid=ctrl.field.contextIdentifier+"_CurrencyIsoCode";if(fields)for(var i=0;i<fields.length;i++)if(fields[i].guid===currencyFieldGuid)return fields[i].value}}],template:__webpack_require__(62)})}()},function(module,exports){module.exports='<input ng-if="$ctrl.fieldType.isCheckBox($ctrl.field.fieldType) && !$ctrl.booleanAsPicklist" ng-checked=$ctrl.field.value type=checkbox disabled=true class="form-control-static input-sm"/> <div ng-if="$ctrl.fieldType.isCheckBox($ctrl.field.fieldType) && $ctrl.booleanAsPicklist" ng-bind="$ctrl.field.value ? $ctrl.labels.Boolean_Picklist_True : $ctrl.labels.Boolean_Picklist_False"> </div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if="$ctrl.fieldType.isName($ctrl.field.fieldType, $ctrl.field.fieldName) &&\n\t\t!$ctrl.destyleReferenceField"> <a ng-href={{::$ctrl.resolveSObjectURL($ctrl.field.displayValue)}} ng-click="$ctrl.navigateToSObject($ctrl.field.displayValue, $event, $ctrl.newWindow)"> <span ng-bind=$ctrl.field.value /> <span class="fa fa-sign-out"/> </a> </div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if="$ctrl.fieldType.isString($ctrl.field.fieldType, $ctrl.field.fieldName) &&\n\t\t!$ctrl.field.isHtmlFormatted" ng-bind=$ctrl.field.value class="form-control-static input-sm slds-scrollable--y"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if="($ctrl.fieldType.isString($ctrl.field.fieldType, $ctrl.field.fieldName)) &&\n\t$ctrl.field.isHtmlFormatted" ng-bind-html=$ctrl.field.value /> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isComboBox($ctrl.field.fieldType) ng-bind=$ctrl.field.value class="form-control-static input-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-number\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isCurrency($ctrl.field.fieldType) class="form-control-static input-sm" ng-bind="($ctrl.field.value | intl:\'C{{$ctrl.field.scale}}\':false:$ctrl.getCurrencyIsoCode():\'{{$ctrl.isoCode}}\')"> </div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-number\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isDate($ctrl.field.fieldType) ng-bind="($ctrl.field.value | intl:\'d\':true)" class="form-control-static input-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-number\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isDateTime($ctrl.field.fieldType) ng-bind="($ctrl.field.value | intl:\'F\':true)" class="form-control-static input-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-number\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isDouble($ctrl.field.fieldType) ng-bind="($ctrl.field.value | intl:\'N{{$ctrl.field.scale}}\':false)" class="form-control-static input-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-number\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isPercent($ctrl.field.fieldType) ng-bind="(($ctrl.field.value != null ? $ctrl.field.value : \'\') | intl:\'N{{$ctrl.field.scale}}\':false) + \'%\'" class="form-control-static input-sm" style=width:auto></div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isEmail($ctrl.field.fieldType) class="form-control-static input-sm"> <a href=mailto:{{::$ctrl.field.value}}> <span ng-bind=::$ctrl.field.value /> <span class="fa fa-sign-out"></span> </a> </div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isEncryptedString($ctrl.field.fieldType) ng-bind=$ctrl.field.value class="form-control-static input-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isId($ctrl.field.fieldType) ng-bind=$ctrl.field.value class="form-control-static input-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-number\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isInteger($ctrl.field.fieldType) ng-bind="($ctrl.field.value | intl:\'N0\':false)" class="form-control-static input-sm"></div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isMultiPicklist($ctrl.field.fieldType) ng-bind=$ctrl.field.displayValue class="form-control-static input-sm slds-scrollable--y"></div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isPicklist($ctrl.field.fieldType) ng-bind="$ctrl.field.displayValue || $ctrl.labels.Picklist_Select_Prompt" class="form-control-static input-sm"></div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-number\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isPhone($ctrl.field.fieldType) ng-bind=$ctrl.field.value class="form-control-static input-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if="$ctrl.fieldType.isReference($ctrl.field.fieldType) && !$ctrl.destyleReferenceField && $ctrl.field.value" class="form-control-static input-sm"> <a ng-href={{::$ctrl.resolveSObjectURL($ctrl.field.value)}} ng-click="$ctrl.navigateToSObject($ctrl.field.value, $event)"> <span ng-bind=::$ctrl.field.displayValue /> <span class="fa fa-sign-out"></span> </a> </div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if="$ctrl.fieldType.isTextarea($ctrl.field.fieldType, $ctrl.field.isHtmlFormatted)" ng-bind=$ctrl.field.value class="form-control-static input-sm textarea-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if="$ctrl.fieldType.isRichText($ctrl.field.fieldType, $ctrl.field.isHtmlFormatted)" ng-bind-html="$ctrl.field.value | richText" class="form-control-static input-sm textarea-sm"/> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if=$ctrl.fieldType.isUrl($ctrl.field.fieldType)> <a ng-click="$ctrl.navigateToURL($ctrl.field.value, false, $event)" class="form-control-static input-sm">{{::$ctrl.field.value}}</a> </div> <div ng-class="{\'slds-truncate\' : $ctrl.isTruncated, \'wrap-text\' : $ctrl.isWrapText}" ng-if="($ctrl.fieldType.isName($ctrl.field.fieldType, $ctrl.field.fieldName) ||\n\t\t$ctrl.fieldType.isReference($ctrl.field.fieldType))\n\t\t&& $ctrl.destyleReferenceField"> <span ng-bind=$ctrl.field.value class="form-control-static input-sm slds-scrollable--y"/> </div>'},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncReadOnlyFieldTemplate",{bindings:{sectionId:"@",guid:"@",field:"<",booleanAsPicklist:"<?",isoCode:"@",isTruncated:"<?",isWrapText:"<?"},template:__webpack_require__(64)})}()},function(module,exports){module.exports='<div class=row> <div class="col-xs-12 content-body"> <nc-read-only-field is-truncated=$ctrl.isTruncated is-wrap-text=$ctrl.isWrapText field=$ctrl.field context-id={{$ctrl.contextId}} guid={{$ctrl.guid}} boolean-as-picklist=$ctrl.booleanAsPicklist iso-code={{$ctrl.isoCode}}> </nc-read-only-field> </div> </div>'},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncScreenSectionFormBuilder",{bindings:{sectionId:"@?",guid:"@?",contextId:"@?",selectedChild:"<?",isEditable:"<?",isReadOnly:"<?",postLoad:"&?",enableFieldAccess:"<?",isPreview:"<?",groupId:"@?",saveOnChange:"<?",disableSaveWithContinue:"<?",bypassLoadData:"<?",booleansAsPicklists:"<?",setBooleanPicklistDefaults:"<?"},controller:["$timeout","screenSection","formBuilder","formValidation","pubsub","$document","ui","label",function($timeout,screenSection,formBuilder,formValidation,pubsub,$document,ui,label){var ctrl=this;function configureSection(){void 0!==ctrl.isEditable&&(screenSection.get(ctrl.sectionId).isEditable=ctrl.isEditable),void 0!==ctrl.isReadOnly&&(screenSection.get(ctrl.sectionId).isReadOnly=ctrl.isReadOnly),void 0!==ctrl.isPreview&&ctrl.isPreview?(pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_CANCEL),pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_SAVE),pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_EDIT)):(!function subscribeToUiUnload(){pubsub.subscribeToUiUnload(function(){if(ctrl.screenSection.getIsDirty())return ctrl.labels.Dirty_Data_Warning})}(),function subscribeToEdit(){pubsub.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.EDIT,function(){ctrl.screenSection.setIsEditing(!0).then(function(){setButtonState()})})}(),function subscribeToSave(){screenSection.isSubscribedToSave||(screenSection.isSubscribedToSave=!0,pubsub.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.SAVE,function(tracker){ui.block(),execCallbackTracker(tracker,null),ctrl.screenSection.saveFormBuilder().then(function(result){execCallbackTracker(tracker,result),setButtonState(),ui.unblock()},function(result){execCallbackTracker(tracker,result),setButtonState(),ui.unblock()})}))}(),function subscribeToCancel(){pubsub.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.CANCEL,function(){ctrl.screenSection.setIsEditing(!1).then(function(){ctrl.screenSection.revertFields(ctrl.guid),setButtonState()})})}(),setButtonState(),function subscribeToLookupChange(){pubsub.subscribe(LifeCycle.Topics.ScreenSectionFormBuilder.LOOKUP_MODIFIED,function(payload){!function setFieldValueBySelectedLookupPayload(fields,payload){var fieldNameToProperty={};{if("UPDATE_VALUES"!==payload.action)return"CLEAR_VALUES"===payload.action?fields.map(function(field){return field.contextIdentifier===payload.referenceContext&&(field.value=null,field.isDirty=!0),field}):fields;var propertyBag=payload.content;return Object.keys(propertyBag).forEach(function(key){fieldNameToProperty[propertyBag[key].fieldName]=propertyBag[key]}),fields.map(function(field){return fieldNameToProperty[field.fieldName]&&field.contextIdentifier===payload.referenceContext&&(field.value=fieldNameToProperty[field.fieldName].value,field.isDirty=!0),field})}}(ctrl.getFields(),payload)})}()),$timeout(function(){jQuery("#ncScreenSectionFormBuilder .form-control").filter(":first").focus()},0,!1),ctrl.postLoad&&ctrl.postLoad({sectionId:ctrl.sectionId,guid:ctrl.guid,contextId:ctrl.contextId})}function execCallbackTracker(tracker,value){tracker&&_.isFunction(tracker)&&tracker(ctrl.guid,value)}function setButtonState(){var isEditing=ctrl.formBuilder.getIsEditing(),canEdit=ctrl.screenSection.getCanEdit();void 0!==ctrl.isPreview&&ctrl.isPreview||ctrl.screenSection.getIsPreview()||!canEdit?(pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_SAVE),pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_CANCEL),pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_EDIT)):(isEditing?pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_SAVE):pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_SAVE),canEdit&&!isEditing?(pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_EDIT),pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_CANCEL)):(pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_EDIT),pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_CANCEL)))}ctrl.screenSection=screenSection,ctrl.formValidation=formValidation,ctrl.formBuilder=formBuilder,ctrl.labels=label.getLabels(),ctrl.isTopbarLoaded=!1,ctrl.$onChanges=function(){ctrl.formValidation.setSelection(ctrl.generatedForm)},ctrl.$onInit=function(){if(function subscribeToTopbarLoad(){pubsub.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.TOPBAR_LOADED,function(){ctrl.disableSaveWithContinue||ctrl.isTopbarLoaded||(pubsub.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_SAVE_WITH_CONTINUE),ctrl.isTopbarLoaded=!0)})}(),pubsub.publish(LifeCycle.Topics.SectionBuilder.IS_INITIALIZED),function validateGuid(){ctrl.guid=ctrl.guid||ui.generateGuid()}(),!ctrl.selectedChild){if(ctrl.screenSection.setIsPreview(ctrl.isPreview),ctrl.bypassLoadData)return void configureSection();ctrl.screenSection.loadData(ctrl.sectionId,ctrl.guid,ctrl.contextId).then(function(resource){configureSection()})}},ctrl.checkForEmptyLookups=function(fields){var contextObjToFieldIndex={},emptyLookups=[];return fields&&(fields.forEach(function(field,index){"REFERENCE"===field.fieldType&&!field.value&&field.referenceContext?emptyLookups.push(field.referenceContext):"REFERENCE"!==field.fieldType&&field.hasOwnProperty("isDisabled")&&(field.isDisabled=!1,field.isReadOnly=!1),contextObjToFieldIndex.hasOwnProperty(field.contextIdentifier)||(contextObjToFieldIndex[field.contextIdentifier]=[]),contextObjToFieldIndex[field.contextIdentifier].push(index)}),emptyLookups.forEach(function(contextIdentifier){contextObjToFieldIndex.hasOwnProperty(contextIdentifier)&&contextObjToFieldIndex[contextIdentifier].forEach(function(fieldIndex){"REFERENCE"!==fields[fieldIndex].fieldType&&!0!==fields[fieldIndex].isReadOnly&&(fields[fieldIndex].isDisabled=!0,fields[fieldIndex].isReadOnly=!0)})})),fields},ctrl.getFields=function(){return ctrl.enableFieldAccess?ctrl.checkForEmptyLookups(ctrl.screenSection.getVisibleFieldsAndHiddenViaFieldConfig(ctrl.screenSection.get(ctrl.sectionId))):ctrl.checkForEmptyLookups(ctrl.formBuilder.getVisibleFields(ctrl.guid))}}],template:__webpack_require__(66)})}()},function(module,exports){module.exports='<div class=container-fluid> <div class=row> <div class=col-xs-12> <form name=$ctrl.generatedForm> <div class=row> <div ng-repeat="field in $ctrl.getFields()"> <div class=clearfix ng-if="$index % 2 === 0"></div> <nc-form-group-template ng-if=field section-id={{$ctrl.sectionId}} guid={{$ctrl.guid}} index={{$index}} field=field context-id={{$ctrl.contextId}} save-on-change=::$ctrl.saveOnChange enable-field-access=$ctrl.enableFieldAccess boolean-as-picklist=$ctrl.booleansAsPicklists set-boolean-picklist-defaults=$ctrl.setBooleanPicklistDefaults> </nc-form-group-template> </div> </div> </form> </div> </div> </div> <div ng-bind-html=$ctrl.scriptBlock></div>'},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncSummaryScreenSection",{bindings:{sectionId:"@",guid:"@",contextId:"@?",columns:"<?",isoCode:"@",displaySectionHeader:"<",isTruncated:"<?",isWrapText:"<?"},controller:["screenSection","formBuilder","ui",function(screenSection,formBuilder,ui){var ctrl=this;ctrl.screenSection=screenSection,ctrl.formBuilder=formBuilder,ctrl.columns,ctrl.sectionHeader,ctrl.setNumberOfColumns=function setNumberOfColumns(screenSectionData){ctrl.columns&&0!=ctrl.columns||(screenSectionData.hasOwnProperty("numberOfColumns")&&0<screenSectionData.numberOfColumns?ctrl.columns=screenSectionData.numberOfColumns:ctrl.columns=2)},ctrl.setSectionHeader=function setSectionHeader(screenSectionData){if(screenSectionData.hasOwnProperty("screenResources")&&screenSectionData.screenResources&&0<Object.keys(screenSectionData.screenResources).length){var screenResource=screenSectionData.screenResources[Object.keys(screenSectionData.screenResources)[0]];if(screenResource.hasOwnProperty("configuration")&&screenResource.configuration&&0<Object.keys(screenResource.configuration).length){var sectionConfig=screenResource.configuration;sectionConfig.hasOwnProperty("sectionHeader")&&sectionConfig.sectionHeader&&(ctrl.sectionHeader=sectionConfig.sectionHeader)}}},ctrl.validateDisplaySectionHeader=function validateDisplaySectionHeader(){ctrl.displaySectionHeader=ctrl.displaySectionHeader||!1},ctrl.validateGuid=function validateGuid(){ctrl.guid=ctrl.guid||ui.generateGuid()},ctrl.$onInit=function(){ctrl.validateGuid(),ctrl.validateDisplaySectionHeader(),ctrl.screenSection.loadData(ctrl.sectionId,ctrl.guid,ctrl.contextId).then(function(data){ctrl.setNumberOfColumns(data),ctrl.displaySectionHeader&&ctrl.setSectionHeader(data)})}}],template:__webpack_require__(68)})}()},function(module,exports){module.exports='<div class="container-fluid slds-box slds-theme--default" ng-if="$ctrl.formBuilder.getVisibleFields($ctrl.guid).length > 0"> <div class=row> <div class=col-xs-12> <div class="slds-text-heading--medium slds-m-bottom--medium" ng-if="$ctrl.displaySectionHeader && $ctrl.sectionHeader" ng-bind=::$ctrl.sectionHeader></div> <div class=row> <div ng-repeat="field in $ctrl.formBuilder.getVisibleFields($ctrl.guid)"> <div class=clearfix ng-if="$index % ($ctrl.columns || 2) === 0"></div> <div class=form-group ng-class="{\n\t\t\t\t\t\t\t\'col-md-6\': ($ctrl.columns || 2) == 2,\n\t\t\t\t\t\t\t\'col-md-4\': ($ctrl.columns || 2) == 3,\n\t\t\t\t\t\t\t\'col-md-3\': ($ctrl.columns || 2) == 4,\n\t\t\t\t\t\t\t\'col-md-2\': ($ctrl.columns || 2) == 5 || ($ctrl.columns || 2) == 6,\n\t\t\t\t\t\t\t\'col-md-1\': ($ctrl.columns || 2) > 6,\n\t\t\t\t\t\t\t\'col-md-12\': ($ctrl.columns ||2) == 1\n\t\t\t\t\t\t}"> <nc-field-label-template is-truncated=true inline-help-text={{field.inlineHelpText}} label={{field.fieldLabel}} is-required=false> </nc-field-label-template> <nc-read-only-field-template is-truncated=$ctrl.isTruncated is-wrap-text=$ctrl.isWrapText field=field context-id={{$ctrl.contextId}} guid={{$ctrl.guid}} iso-code={{$ctrl.isoCode}}> </nc-read-only-field-template> </div> </div> </div> </div> </div> </div>'},function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").component("ncTopbarScreenSection",{bindings:{sectionId:"@?",guid:"@?",contextId:"@?"},controller:["screenSection","formBuilder","formValidation","pubsub",function(screenSection,formBuilder,formValidation,pubsub){var ctrl=this;ctrl.screenSection=screenSection,ctrl.formBuilder=formBuilder,ctrl.pubsub=pubsub,ctrl.$onInit=function(){ctrl.screenSection.loadData(ctrl.sectionId,ctrl.guid,ctrl.contextId).then(function(){!function subscribeToSave(){ctrl.pubsub.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.SAVE,function(){ctrl.formBuilder.clearFields(),ctrl.screenSection.loadData(ctrl.sectionId,ctrl.guid,ctrl.contextId)})}()})}}],template:__webpack_require__(70)})}()},function(module,exports){module.exports='<div class="container-fluid slds-box slds-theme--default hidden-sm"> <div class=row> <div class=col-xs-12> <div class=row> <div class="form-group col-md-2" ng-repeat="field in $ctrl.formBuilder.getVisibleFields($ctrl.guid) as fields"> <nc-field-label-template inline-help-text={{field.inlineHelpText}} label={{field.fieldLabel}} is-required=false> </nc-field-label-template> <nc-read-only-field-template field=field context-id={{$ctrl.contextId}} guid={{$ctrl.guid}}> </nc-read-only-field-template> </div> </div> </div> </div> </div>'},function(module,exports,__webpack_require__){var content=__webpack_require__(72);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(1)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){(module.exports=__webpack_require__(0)(!1)).push([module.i,".slds .slds-input-has-icon button.slds-input__icon{\n\tright: 4%;\n}\n\n.slds .slds-input-has-icon nds-icon-utility-event.hydrated{\n\tdisplay: flex;\n}\n\n.slds .slds-datepicker__filter_month.slds-grid.slds-grid_align-spread.slds-grow{\n\tjustify-content: center;\n}\n\n.slds abbr{\n\ttext-decoration: none;\n}\n\n.slds .slds-align_absolute-center{\n\tdisplay: -webkit-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n\t-webkit-box-pack: center;\n\t-ms-flex-pack: center;\n\tjustify-content: center;\n\t-ms-flex-line-pack: center;\n\talign-content: center;\n\t-webkit-box-align: center;\n\t-ms-flex-align: center;\n\talign-items: center;\n\tmargin: auto;\n}\n\n.force .body-content nds-input-datepicker h2 {\n\tmargin-top: 0;\n}\n\n.slds nds-input-datepicker .slds-dropdown-trigger_click .slds-dropdown {\n\tdisplay: none;\n}\n\n.slds nds-input-datepicker .slds-dropdown-trigger_click.slds-is-open .slds-dropdown {\n\tdisplay: block;\n\tvisibility: visible;\n\topacity: 1;\n}\n\n.slds nds-input-datepicker .slds-datepicker__filter_month {\n\tpadding: 0 0.25rem 0 0;\n}\n\n.slds nds-input-datepicker .slds-datepicker__filter_month.slds-grid.slds-grid_align-spread.slds-grow {\n\t-webkit-box-pack: justify;\n\t-ms-flex-pack: justify;\n\tjustify-content: space-between;\n}\n\n.slds nds-input-datepicker .slds-button_icon-container {\n\twidth: 2rem;\n\theight: 2rem;\n}",""])},function(module,exports,__webpack_require__){var content=__webpack_require__(74);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(1)(content,options);content.locals&&(module.exports=content.locals)},function(module,exports,__webpack_require__){(module.exports=__webpack_require__(0)(!1)).push([module.i,'.force .default-row-value {\n\tmin-height: 20px;\n}\n\n.force input::-webkit-inner-spin-button,\n.force input::-webkit-calendar-picker-indicator{\n\tdisplay: none;\n\t-webkit-appearance: none;\n}\n\n.force input[type="date"]::-webkit-input-placeholder{\n\tvisibility: hidden !important;\n}\n\n.force ol {\n\tlist-style: decimal;\n}\n\n.force ul {\n\tlist-style: disc;\n}\n\n.form-control.ng-dirty.checkbox-inline,\n.form-control.ng-dirty.checkbox-inline + span {\n   color: #16325c !important;\n   font-weight: bold;\n}\n\n.form-control.nc-not-pristine.ng-dirty,\n .form-control.nc-not-pristine.ng-dirty + span{\n\tcolor: #16325c !important;\n\tfont-weight: bold !important;\n}\n\n.form-control.nc-pristine.ng-dirty,\n .form-control.nc-pristine.ng-dirty + span{\n\tcolor: black !important;\n\tfont-weight: normal !important;\n}\n\n.slds-is-absolute{\n   position:absolute;\n   z-index:10;\n}\n\n.datetimepicker-container_form-group{\n\tdisplay: flex;\n}\n\n.datetimepicker-container_date{\n\tmargin-right: 0.3rem;\n\tposition: relative;\n}\n\n.datetimepicker-container_time{\n\tmargin-left: 0.3rem;\n\tposition: relative;\n}\n\n.datetimepicker-container_icon-date{\n\tposition: absolute;\n\tz-index: 9000;\n\tright: .5rem;\n\ttop: .5rem;\n}\n\n.datetimepicker-container_icon-time{\n\tposition: absolute;\n\tz-index: 9000;\n\tright: .5rem;\n\ttop: .5rem;\n}\n\n.wrap-text{\n\toverflow-wrap:break-word;\n\twhite-space:normal;\n\tdisplay:inline-block;\n\theight: auto !important;\n}\n\n.wrap-number{\n\tword-break: break-all;\n\twhite-space: normal;\n\tdisplay: inline-block;\n\theight: auto !important;\n}\n\n.slds div.slds-card.modal-field-dropdown{\n\tmax-width: 45rem;\n\tmax-height: 12rem;\n\toverflow-y: auto;\n\tborder: 1px solid #d8dde6;\n}\n\n.slds div.slds-modal div.modal-content-container {\n\toverflow: auto;\n}\n',""])},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").directive("datepicker",["browserService",function(browserService){function formatDate(dateToFormat,dateFormat){return"string"!=typeof dateToFormat?"function"!=typeof dateToFormat.getDate?"":(newDate=moment(dateToFormat)).isValid()?newDate.utc().format(dateFormat):"":(newDate=moment(new Date(dateToFormat.replace(/[-\.]/g,"/")))).isValid()?newDate.utc().format(dateFormat):"";var newDate}function elementPreviousDate(element,value){return void 0===value?value=element.dataset.previousDate:element.dataset.previousDate=value,value}return{restrict:"A",require:"ngModel",scope:{datesDisabled:"@",defaultViewDate:"@"},link:function(scope,element,attrs,ngModelCtrl){function saveToModel(newDate){ngModelCtrl&&ngModelCtrl.$setViewValue(newDate)}if(ngModelCtrl&&(ngModelCtrl.$formatters.push(function(modelValue){if(_.isUndefined(modelValue)||_.isNull(modelValue))return null;var td=new Date(modelValue);return isNaN(td.getDate())?null:new Date(td.getUTCFullYear(),td.getUTCMonth(),td.getUTCDate(),td.getUTCHours(),td.getUTCMinutes(),td.getUTCSeconds())}),ngModelCtrl.$parsers.push(function(viewValue){return _.isUndefined(viewValue)||_.isNull(viewValue)?null:moment(viewValue).valueOf()})),browserService.isMobile())jQuery(element).attr("type","date");else{var options={container:attrs.container||void 0,autoclose:attrs.autoclose||!0,orientation:attrs.orientation||"auto",forceParse:attrs.forceParse||!1,format:attrs.format||"yyyy-mm-dd"};attrs.datesDisabled&&(options.datesDisabled=scope.$eval(attrs.datesDisabled)),attrs.$observe("datesDisabled",function(value){value&&jQuery(element).datepicker("setDatesDisabled",scope.$eval(value))}),attrs.startDate&&(options.startDate=attrs.startDate),attrs.$observe("startDate",function(value){value&&jQuery(element).datepicker("setStartDate",value)}),attrs.endDate&&(options.endDate=attrs.endDate),attrs.$observe("endDate",function(value){value&&jQuery(element).datepicker("setEndDate",value)}),attrs.defaultViewDate&&(options.defaultViewDate=attrs.defaultViewDate),attrs.$observe("defaultViewDate",function(value){value&&jQuery(element).datepicker("setDate",value)}),void 0===options.container&&0<jQuery(".ui-container").length&&(options.container=".ui-container"),jQuery(element).attr("type","text").datepicker(options).on("show",function(e){if(!e.date){var inputValue=jQuery(element).val();inputValue&&jQuery(element).datepicker("setDate",inputValue)}}).on("changeDate",function(e){saveToModel(formatDate(e.date,"YYYY-MM-DD"))}).on("blur",function(){var $this=jQuery(this);elementPreviousDate(this)||""==$this.val()||elementPreviousDate(this,$this.val());var newDate=formatDate(elementPreviousDate(this),"YYYY-MM-DD");$this.val(newDate),saveToModel(newDate),""===newDate&&elementPreviousDate(this)&&jQuery(element).datepicker("setDate",newDate)}).on("focus",function(){var inputValue=jQuery(this).val();(elementPreviousDate(this,inputValue),""!==inputValue)&&(""===formatDate(inputValue,"YYYY-MM-DD")&&jQuery(element).datepicker("setDate",new Date),jQuery(this).val(inputValue))}).on("keyup",function(e){if(13!==parseInt(e.keyCode||e.which,10)){var $this=jQuery(this);if("function"==typeof $this.val){var inputValue=$this.val();elementPreviousDate(this,inputValue);var newDate=formatDate(inputValue,"YYYY-MM-DD");""===newDate&&(newDate=new Date);var startPos=$this.prop("selectionStart"),startEnd=$this.prop("selectionEnd");jQuery(element).datepicker("setDate",newDate),$this.val(inputValue),saveToModel(inputValue),$this.prop("selectionStart",startPos),$this.prop("selectionEnd",startEnd)}}}).on("keydown",function(e){var key=parseInt(e.keyCode||e.which,10);if((13===key||9===key)&&elementPreviousDate(this)){var $this=jQuery(this);if("function"==typeof $this.val){var newDate=formatDate(elementPreviousDate(this),"YYYY-MM-DD");$this.val(newDate),elementPreviousDate(this,newDate)}}})}}}}])}()},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").directive("ndsDateValue",function(){return{restrict:"A",scope:{ndsDateValue:"="},link:function(scope,element){var ctrl=scope.ndsDateValue;element[0].value=ctrl.field.value,element.bind("valueChange",function(event){scope.$apply(function(){ctrl.field.value=event.originalEvent.detail,ctrl.field.isDirty=!0,ctrl.onChange()})})}}})}()},function(module,exports){var _CKEDITOR_;_CKEDITOR_=CKEDITOR,angular.module("ncScreenSectionFormBuilder").directive("richTextEditor",function(){return{restrict:"A",require:"ngModel",scope:{},link:function(scope,element,attrs,ngModel){if("true"===attrs.richTextEditor){_CKEDITOR_.on("dialogDefinition",function(ev){if("image"==ev.data.name)for(var def=ev.data.definition,tabs=["Link","Upload","advanced"],i=tabs.length-1;0<=i;--i)def.removeContents(tabs[i])});var editor=function configureEditor(){return jQuery(element).ckeditor({height:400,toolbar:[{name:"clipboard",items:["PasteFromWord","-","Undo","Redo","CodeSnippet"]},{name:"text",items:["Bold","Italic","Underline","TextColor","BGColor"]},{name:"format",items:["Undo","Redo","NumberedList","BulletedList","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight"]},{name:"attach",items:["Link","Image"]}],extraPlugins:"codesnippet,pastefromword",removePlugins:"removeformat,about,allyhelp,bidi,pastefromexcel,stylesheetparser,autogrow,droppaste,cancel,spreadsimport",removeButtons:""}).editor}();editor.on("instanceReady",function(){editor.setData(ngModel.$viewValue)}),editor.on("change",updateModel),editor.on("key",updateModel),editor.on("dataReady",updateModel)}function updateModel(){editor.checkDirty()&&scope.$apply(function(){ngModel.$setViewValue(editor.getData())})}}}})},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").provider("screenSectionFormBuilderRemoting",[function ScreenSectionFormBuilderRemoting(){var self=this;self.endpoints={},self.$get=["$q",function($q){return{loadData:function(sectionId,guid,contextObjectId){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.loadData,sectionId||null,guid||null,contextObjectId||null,function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1,buffer:!1}),deferred.promise},getSearchResults:function(screenResource){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.executeBusinessLogic,angular.fromJson(angular.toJson(screenResource))||null,"screen-resource-search-container-bean",function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1}),deferred.promise},saveAllData:function(screenResources){var deferred=$q.defer(),resources=[];return screenResources.forEach(function(item){resources.push(angular.fromJson(angular.toJson(item)))}),Visualforce.remoting.Manager.invokeAction(self.endpoints.saveAllData,resources,function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1}),deferred.promise},saveData:function(screenResource){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.saveData,angular.fromJson(angular.toJson(screenResource)),function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1}),deferred.promise}}}],self.setEndpoint=function(endpoint){self.endpoint=angular.merge(self.endpoints,endpoint)}}])}()},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").service("fieldType",function FieldType(){var self=this;self.types={ANYTYPE:"ANYTYPE",BASE64:"BASE64",BOOLEAN:"BOOLEAN",COMBOBOX:"COMBOBOX",CURRENCY:"CURRENCY",DATACATEGORYGROUPREFERENCE:"DATACATEGORYGROUPREFERENCE",DATE:"DATE",DATETIME:"DATETIME",DOUBLE:"DOUBLE",EMAIL:"EMAIL",ENCRYPTEDSTRING:"ENCRYPTEDSTRING",ID:"ID",INTEGER:"INTEGER",MULTIPICKLIST:"MULTIPICKLIST",PERCENT:"PERCENT",PHONE:"PHONE",PICKLIST:"PICKLIST",REFERENCE:"REFERENCE",STRING:"STRING",TEXTAREA:"TEXTAREA",TIME:"TIME",URL:"URL"},self.nameTypes={ID:"ID",NAME:"NAME"},self.getType=function(key){var type,ucKey;return key&&self.types.hasOwnProperty(ucKey=key.toUpperCase())&&(type=self.types[ucKey]),type},self.getNameType=function(key){var type,ucKey;return key&&self.nameTypes.hasOwnProperty(ucKey=key.toUpperCase())&&(type=self.nameTypes[ucKey]),type},self.isText=function(type){return self.getType(type)==self.types.STRING},self.isName=function(type,name){return self.getType(type)==self.types.STRING&&self.getNameType(name)==self.nameTypes.NAME},self.isString=function(type,name){return!self.isName(type,name)&&self.isText(type)},self.isCheckBox=function(type){return self.getType(type)==self.types.BOOLEAN},self.isComboBox=function(type){return self.getType(type)==self.types.COMBOBOX},self.isCurrency=function(type){return self.getType(type)==self.types.CURRENCY},self.isDate=function(type){return self.getType(type)==self.types.DATE},self.isDateTime=function(type){return self.getType(type)==self.types.DATETIME},self.isDouble=function(type){return self.getType(type)==self.types.DOUBLE},self.isEmail=function(type){return self.getType(type)==self.types.EMAIL},self.isEncryptedString=function(type){return self.getType(type)==self.types.ENCRYPTEDSTRING},self.isId=function(type){return self.getType(type)==self.types.ID},self.isInteger=function(type){return self.getType(type)==self.types.INTEGER},self.isMultiPicklist=function(type){return self.getType(type)==self.types.MULTIPICKLIST},self.isPicklist=function(type){return self.getType(type)==self.types.PICKLIST},self.isPercent=function(type){return self.getType(type)==self.types.PERCENT},self.isPhone=function(type){return self.getType(type)==self.types.PHONE},self.isReference=function(type){return self.getType(type)==self.types.REFERENCE},self.isTextarea=function(type,isHtmlFormatted){return self.getType(type)==self.types.TEXTAREA&&!isHtmlFormatted},self.isRichText=function(type,isHtmlFormatted){return self.getType(type)==self.types.TEXTAREA&&isHtmlFormatted},self.isUrl=function(type){return self.getType(type)==self.types.URL}})}()},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").service("formBuilder",function FormBuilder(){var self=this;self.fields={},self.screenSectionIds=[],self.isEditing=!1,self.orderedFields=[],self.getFields=function(guid){return self.fields[guid]},self.getVisibleFields=function(guid){return self.filterVisible(self.fields[guid])},self.setGuid=function(guid){self.fields.hasOwnProperty(guid)||(self.fields[guid]=[])},self.loadFields=function(guid,propertyBag,isConditional,sectionDisplayOrder){self.setGuid(guid);for(var i=0;i<propertyBag.length;i++)if(self.hasField(guid,propertyBag[i])){var fieldIndex=self.getFieldIndex(guid,propertyBag[i]);self.fields[guid][fieldIndex].isVisible===propertyBag[i].isVisible&&(self.fields[guid][fieldIndex]=propertyBag[i])}else{sectionDisplayOrder=sectionDisplayOrder||0;if(isConditional)if(self.orderedFields[guid].length&&self.orderedFields[guid][self.orderedFields[guid].length-1].sectionDisplayOrder<=sectionDisplayOrder)self.fields[guid].push(propertyBag[i]),self.addToOrderedFields(propertyBag[i],isConditional,sectionDisplayOrder,guid);else for(var j=self.orderedFields[guid].length-1;-1<j;j--){if(!self.orderedFields[guid][j].isConditional||self.orderedFields[guid][j].sectionDisplayOrder<=sectionDisplayOrder){self.fields[guid].splice(j+1,0,propertyBag[i]),self.spliceToOrderedFields(propertyBag[i],isConditional,sectionDisplayOrder,j+1,guid);break}if(0==j){self.fields[guid].splice(j,0,propertyBag[i]),self.spliceToOrderedFields(propertyBag[i],isConditional,sectionDisplayOrder,j,guid);break}}else self.fields[guid].push(propertyBag[i]),self.addToOrderedFields(propertyBag[i],isConditional,sectionDisplayOrder,guid)}},self.unloadFields=function(guid,propertyBag){for(var i=0;i<propertyBag.length;i++){var index=self.fields[guid].indexOf(propertyBag[i]);0<=index&&angular.forEach(self.fields[guid],function(field,key){angular.equals(field,propertyBag[i])&&self.fields[guid].splice(index,1)})}},self.addToOrderedFields=function(field,isConditional,sectionDisplayOrder,sectionGuid){var fieldGuid=field.guid;self.orderedFields[sectionGuid]?self.orderedFields[sectionGuid].push({guid:fieldGuid,isConditional:isConditional,sectionDisplayOrder:sectionDisplayOrder}):self.orderedFields[sectionGuid]=[{guid:fieldGuid,isConditional:isConditional,sectionDisplayOrder:sectionDisplayOrder}]},self.spliceToOrderedFields=function(field,isConditional,sectionDisplayOrder,index,sectionGuid){var fieldGuid=field.guid;self.orderedFields[sectionGuid]?self.orderedFields[sectionGuid].splice(index,0,{guid:fieldGuid,isConditional:isConditional,sectionDisplayOrder:sectionDisplayOrder}):self.orderedFields[sectionGuid]=[{guid:fieldGuid,isConditional:isConditional,sectionDisplayOrder:sectionDisplayOrder}]},self.clearOrderedFields=function(){self.orderedFields=[]},self.clearGuid=function(guid){self.fields[guid]={}},self.filterVisible=function(fields){return _.filter(fields,function(field){return field.hasOwnProperty("isVisible")&&field.isVisible})},self.getDisplayOrder=function(resource){return resource.hasOwnProperty("displayOrder")?resource.displayOrder:0},self.getFieldIndex=function(guid,field){for(var index=-1,i=0;i<self.fields[guid].length;i++)if(field.guid==self.fields[guid][i].guid){index=i;break}return index},self.hasField=function(guid,field){for(var isField=!1,i=0;i<self.fields[guid].length;i++)if(field.guid==self.fields[guid][i].guid){isField=!0;break}return isField},self.clearFields=function(){self.fields={},self.screenSectionIds=[]},self.hasDirtyField=function(){for(var values=_.values(self.fields),valIndex=0,valLen=values.length;valIndex<valLen;valIndex++)for(var i=0;i<values[valIndex].length;i++)if(values[valIndex][i].isDirty)return!0;return!1},self.getIsEditing=function(){return self.isEditing},self.setIsEditing=function(value){self.isEditing=value},self.addSectionId=function(screenSectionId){self.hasScreenSection(screenSectionId)||self.screenSectionIds.push(screenSectionId)},self.removeSectionId=function(screenSectionId){var index=self.screenSectionIds.indexOf(screenSectionId);-1<index&&self.screenSectionIds.splice(index,1)},self.getSectionIds=function(){return self.screenSectionIds},self.hasScreenSection=function(screenSectionId){for(var ssIdIndex=0,ssIdLen=self.screenSectionIds.length;ssIdIndex<ssIdLen;ssIdIndex++)if(self.screenSectionIds[ssIdIndex]===screenSectionId)return!0;return!1}})}()},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").service("formValidation",function FormValidation(){var self=this;self.selection={},self.setSelection=function(selection){self.selection=selection},self.getSelection=function(){return self.selection},self.clearSelection=function(){self.selection={}},self.isValid=function(){var selection=self.getSelection();return selection&&selection.$valid},self.isInvalid=function(){return!self.isValid()}})}()},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").service("picklistService",function PicklistService(){var self=this;self.picklistMap=[],self.callbackMap=[];function Bitset(a){"string"!=typeof a&&(a=""),Bitset.init(),this.data=a.split(""),this.trim()}return Bitset.prototype.testBit=function(a){var b=Math.floor(a/6);return!(b>=this.data.length)&&0!=(Bitset.codes[this.data[b]]&32>>a%6)},Bitset.prototype.setBit=function(a){var b=Math.floor(a/6);this.pad(b),this.data[b]=Bitset.alphabet[Bitset.codes[this.data[b]]|32>>a%6]},Bitset.prototype.clearBit=function(a){var b=Math.floor(a/6);b<this.data.length&&(this.data[b]=Bitset.alphabet[Bitset.codes[this.data[b]]&(255^32>>a%6)],this.trim())},Bitset.prototype.toString=function(){return this.data.join("")},Bitset.prototype.trim=function(){for(var a=this.data.length-1;0<=a&&this.data[a]==Bitset.alphabet[0];a--);this.data.splice(a+1,this.data.length)},Bitset.prototype.pad=function(a){for(var b=this.data.length,d=0;d<=a-b;d++)this.data.push(Bitset.alphabet[0])},Bitset.prototype.length=function(){return this.data.length},Bitset.initialized=!1,Bitset.init=function(){if(!Bitset.initialized){Bitset.initialized=!0,Bitset.alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Bitset.codes=[];for(var a=0;a<Bitset.alphabet.length;a++)Bitset.codes[Bitset.alphabet[a]]=a}},{updateCurrentSelectedValue:function(fieldGuid,currentValue){for(var found=!1,index=0,len1=self.picklistMap.length;index<len1;index++)if(self.picklistMap[index].fieldGuid==fieldGuid){self.picklistMap[index].currentValue=currentValue,found=!0;break}found||self.picklistMap.push({fieldGuid:fieldGuid,currentValue:currentValue});index=0;for(var len2=self.callbackMap.length;index<len2;index++)self.callbackMap[index].controllingGuid==fieldGuid&&self.callbackMap[index].callback(currentValue)},registerCallback:function(dependentGuid,controllingGuid,callback){for(var found=!1,index=0,len4=self.callbackMap.length;index<len4;index++)if(self.callbackMap[index].dependentGuid==dependentGuid){self.callbackMap[index]={dependentGuid:dependentGuid,controllingGuid:controllingGuid,callback:callback},found=!0;break}found||self.callbackMap.push({dependentGuid:dependentGuid,controllingGuid:controllingGuid,callback:callback})},getControllerSelectedValue:function(controllingGuid){for(var index=0,len3=self.picklistMap.length;index<len3;index++)if(self.picklistMap[index].fieldGuid==controllingGuid)return self.picklistMap[index].currentValue;return null},buildControllingFields:function(maps,options){var controllingFields=[];if(maps&&options)for(var map in maps){for(var dependentFields=[],controllingField=map,bit=new Bitset(maps[map]),fldIndex=0,fldLen=options.length;fldIndex<fldLen;fldIndex++)bit.testBit(fldIndex)&&dependentFields.push(options[fldIndex]);controllingFields.push({controllingField:controllingField,dependentFields:dependentFields})}return controllingFields},clearMaps:function(){self.picklistMap=[],self.callbackMap=[]},getCallbackMap:function(){return self.callbackMap},getPicklistMap:function(){return self.picklistMap},picklistMap:self.picklistMap,callbackMap:self.callbackMap}})}()},function(module,exports){!function(){"use strict";angular.module("ncScreenSectionFormBuilder").service("visualForceMarkup",["$templateRequest","$q",function VisualForceMarkup($templateRequest,$q){var self=this;function collectProperty(markup,name){var value,start=markup.indexOf(name+'="');if(-1<start){start=start+name.length+2;var end=markup.indexOf('"',start);value=markup.substring(start,end)}return value}function stripTags(markup){var temp=markup.slice(markup.indexOf(">")+1);return temp=temp.slice(0,temp.indexOf("<"))}function collectTags(markup,tagName){for(var tags=[],tag=function makeSearchTag(name){return{start:"<"+name,end:"</"+name+">"}}(tagName),start=markup.indexOf(tag.start);-1<start;){var end=markup.indexOf(tag.end,start)+tag.end.length;tags.push(markup.substring(start,end)),start=markup.indexOf(tag.start,end)}return tags}function removeTags(markup,tags){for(var temp=markup,i=0;i<tags.length;i++)temp=temp.replace(tags[i],"");return temp}function extractJsonData(key,picklistLineArray){var lines=function getLinesStartingWith(searchString,searchArray){for(var resultArray=[],saIndex=0,saLen=searchArray.length;saIndex<saLen;saIndex++)searchArray[saIndex].startsWith(searchString)&&resultArray.push(searchArray[saIndex]);return resultArray}(key,picklistLineArray);if(0<lines.length){var jsonString=removeTags(lines[0],[key,";"]).replace(/'/g,'"');return JSON.parse(jsonString)}return null}function getMapValues(template,picklistLineArray){var plKey=function getKeyFromData(id,searchArray){for(var plIndex=0,plLen=searchArray.length;plIndex<plLen;plIndex++)if(searchArray[plIndex].startsWith("new picklist('"+id)){var items=removeTags(searchArray[plIndex],["new picklist(",");"]).split(",");if(items[0]=="'"+id+"'")return items[1].slice(1,-1)}for(var plIndex=0,plLen=searchArray.length;plIndex<plLen;plIndex++)if(searchArray[plIndex].startsWith("new multiPicklist('"+id)){var items=removeTags(searchArray[plIndex],["new multiPicklist(",");"]).split(",");if(items[0]=="'"+id+"'")return items[1].slice(1,-1)}return null}(self.getValueFromTemplate(template,"id").replace(/"/g,""),picklistLineArray);if(plKey)var map=extractJsonData("pl.map_"+plKey+"=",picklistLineArray),mapValues=extractJsonData("pl.vals_"+plKey+"=",picklistLineArray);return{map:map,mapValues:mapValues}}function extractOptions(field){var optionValues=[],optionLabels=[],template=field.template;if("MULTIPICKLIST"==field.type&&(template=collectTags(template,"select")[0]),template&&-1!=template.indexOf("<select"))for(var optionsRaw=collectTags(template,"option"),opIndex=0,opLen=optionsRaw.length;opIndex<opLen;opIndex++){var val=self.getValueFromTemplate(optionsRaw[opIndex],"value");optionValues.push(val),optionLabels.push(removeTags(optionsRaw[opIndex].replace(/"/g,""),["<option value="+val+">","</option>"]))}return{optionValues:optionValues,optionLabels:optionLabels}}function cachePicklistData(sectionId){for(var sectionControlData=[],picklistLineArray=function convertPicklistScriptLinesToArray(){if(self.plScripts)for(var index=0,len=self.plScripts.length;index<len;index++)if(-1!==self.plScripts[index].indexOf("window.pl"))return removeTags(self.plScripts[index],["<script>","<\/script>",/\r?\n|\r/g,/;\s*$/]).split(";");return null}(),fldIndex=0,fldLen=self.fields.length;fldIndex<fldLen;fldIndex++){var field=self.fields[fldIndex],template=field.template,map=[],mapValues=[];if(picklistLineArray){var mapInfo=getMapValues(template,picklistLineArray);map=mapInfo.map,mapValues=mapInfo.mapValues}var optionInfo=extractOptions(field),optionValues=optionInfo.optionValues,optionLabels=optionInfo.optionLabels;sectionControlData.push({name:field.name,type:field.type,maps:map,mapValues:mapValues,optionValues:optionValues,optionLabels:optionLabels})}!function cacheControlData(sectionId,sectionControlData){for(var found=!1,cdIndex=0,cdLen=self.controlData.length;cdIndex<cdLen;cdIndex++)self.controlData[cdIndex].key==sectionId&&(found=!0,self.controlData[cdIndex].value=sectionControlData);found||self.controlData.push({key:sectionId,value:sectionControlData})}(sectionId,sectionControlData)}function controlDataIsRequired(data,isRelatedList){var screenResource=function getScreenResource(sectionControlData,isRelatedList){var resource=_.values(sectionControlData.screenResources)[0];if(isRelatedList){var children=function getChildren(resource){{if(resource&&resource.children&&0<resource.children.length&&resource.children[0].isList)return _.values(resource.children[0].children);if(resource)return _.values(resource.children)}}(resource);children&&children.length&&(resource=children[0])}return resource}(data,isRelatedList),bag=function getPropertyBag(screenResource){if(screenResource)return function filterPropertyBag(propertyBag){return _.filter(_.values(propertyBag),function(field){return field.hasOwnProperty("isVisible")&&field.isVisible})}(screenResource.propertyBag)}(screenResource),configMap=function createFieldConfigurationMap(screenResource){var configMap={};screenResource&&screenResource.configuration&&screenResource.configuration.fieldConfiguration&&screenResource.configuration.fieldConfiguration.fieldConfiguration.length&&_.each(screenResource.configuration.fieldConfiguration.fieldConfiguration,function(config,index){var fieldGuidKey=config.nFORCE__sObject_Name__c+"_"+config.nFORCE__Field_Name__c;configMap[fieldGuidKey]=config});return configMap}(screenResource);if(bag)for(var bagIndex=0,bagLen=bag.length;bagIndex<bagLen;bagIndex++)if((data.isEditable||isFieldEditableBecauseOfFieldConfiguration(bag[bagIndex],configMap))&&"PICKLIST"==bag[bagIndex].fieldType||"MULTIPICKLIST"==bag[bagIndex].fieldType)return!0;return!1}function isFieldEditableBecauseOfFieldConfiguration(field,configMap){return!!configMap.hasOwnProperty(field.guid)&&configMap[field.guid].nFORCE__Is_Editable__c}function buildUrl(sectionId,contextId,data,options){var url="/apex/PageServer?page=MarkupService";if(options&&options.fieldSetKey&&options.sObjectType?url+="&fieldSetKey="+options.fieldSetKey+"&sObjectType="+options.sObjectType:url+="&sectionId="+(sectionId||"")+"&isEditable=false",url+=contextId?"&contextId="+contextId:"",data&&data.screenResources){var references,screenResource=data.screenResources[Object.keys(data.screenResources)[0]];-1!==screenResource.apexType.indexOf("MappedSObjectScreenResource")?references=function getReferenceData(screenResource,newMockObjectId){var referenceData=parseReferences(screenResource.propertyBag);return referenceData.newMockObjectId=newMockObjectId,referenceData}(screenResource,contextId):-1!==screenResource.apexType.indexOf("MappedSObjectHierarchyScreenResource")&&(references=function getReferenceDataFromHierarchy(screenResource){{if(screenResource.children[0]&&screenResource.children[0].children[0]){var propertyBag=screenResource.children[0].propertyBag,referenceData=parseReferences(propertyBag),guid=screenResource.children[0].children[0].guid;return referenceData.newMockObjectId=guid.substr(guid.length-18),referenceData}return null}}(screenResource)),references&&(url+="&referenceData="+JSON.stringify(references))}return url}function parseReferences(propertyBag){for(var referenceData={},i=0;i<Object.keys(propertyBag).length;i++){var property=propertyBag[Object.keys(propertyBag)[i]];property.referenceFieldPath&&0<(property.referenceFieldPath.match(/./g)||[]).length&&!referenceData[property.contextIdentifier]&&(referenceData[property.contextIdentifier]=propertyBag[property.contextIdentifier+"_Id"].value)}return referenceData}return self.fields=[],self.scripts=[],self.controlData=[],String.prototype.startsWith||(String.prototype.startsWith=function(searchString,position){return position=position||0,this.substr(position,searchString.length)===searchString}),self.getValueFromTemplate=function(markup,attribute){var start=markup.indexOf(attribute),searchText=markup.substring(start),newStart=searchText.indexOf('"')+1;return searchText.substring(newStart,searchText.indexOf('"',newStart))},self.getControlData=function(sectionId,fieldGuid){if(self.controlData)for(var cdIndex=0,cdLen=self.controlData.length;cdIndex<cdLen;cdIndex++)if(self.controlData[cdIndex].key==sectionId)for(var sectionControlData=self.controlData[cdIndex].value,scdIndex=0,scdLen=sectionControlData.length;scdIndex<scdLen;scdIndex++)if(sectionControlData[scdIndex].name==fieldGuid)return sectionControlData[scdIndex]},self.retrieve=function(sectionId,contextId,data,options,guidList){var url=buildUrl(sectionId,contextId,data,options),isRelatedList=!!options&&options.isRelatedList,deferred=$q.defer();return controlDataIsRequired(data,isRelatedList)||isRelatedList?$templateRequest(url).then(function(markup){var errors=function collectErrors(markup){if(-1===markup.indexOf("theErrorPage"))return null;for(var spans=collectTags(markup,"span"),spIndex=0,spLen=spans.length;spIndex<spLen;spIndex++)if("theErrorPage:theError"==collectProperty(spans[spIndex],"id"))return stripTags(spans[spIndex]);return"An error was encountered in the Markup Service returned partial, but no detail of the error was found."}(markup=function _unescapeHtml(input){return _.unescape(input).replace(/&#39;/g,"'")}(markup));if(errors)console.error("ERROR: Unable to process Picklist or Multipicklist data.  "+errors.replace(/&#39;/g,"'")),deferred.resolve("Error");else{var scripts=function collectScripts(markup){return collectTags(markup,"script")}(markup),plscripts=function collectPLScripts(scripts){for(var pls=[],i=0;i<scripts.length;i++)(-1<scripts[i].indexOf("picklist")||-1<scripts[i].indexOf("multiPicklist"))&&pls.push(scripts[i]);return pls}(scripts),fields=function collectFields(markup){for(var fields=[],raw=collectTags(markup,"field-template"),i=0;i<raw.length;i++){var template=raw[i].replace(/\<field-template.*?>/,"").replace("</field-template>","").trim();fields.push({template:template,name:collectProperty(raw[i],"name"),type:collectProperty(raw[i],"type")})}return fields}(markup=removeTags(markup,scripts));if(self.fields=fields,self.scripts=scripts,self.plScripts=plscripts,null==guidList)cachePicklistData(sectionId);else for(var i=0;i<guidList.length;i++)cachePicklistData(guidList[i]);var result={scripts:plscripts,fields:fields};deferred.resolve(result)}}):deferred.resolve(),deferred.promise},self.testFunctions={buildUrl:buildUrl,controlDataIsRequired:controlDataIsRequired},self}])}()}]);